<div *ngIf="pending; else loaded" class="loader">
  <mat-spinner class="margin" [diameter]="50" [strokeWidth]="5"></mat-spinner>
</div>
<ng-template #loaded>
  <div *ngIf="channel">
    <mat-form-field [formGroup]="form" appearance="standard">
      <mat-label>Filter</mat-label>
      <input matInput formControlName="filter" placeholder="Ex. ium" #input />
    </mat-form-field>
    <table
      mat-table
      [dataSource]="dataSource"
      multiTemplateDataRows
      matSort
      [matSortActive]="sort"
      [matSortDirection]="sortType"
      (matSortChange)="sortVideos($event)"
    >
      <ng-container matColumnDef="imgURL">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <img [src]="element?.imgURL" />
        </td>
      </ng-container>
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="title">Title</th>
        <td mat-cell *matCellDef="let element">
          {{ element?.title }}
        </td>
      </ng-container>
      <ng-container matColumnDef="publishedAt">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="publishedAt">
          Published At
        </th>
        <td mat-cell *matCellDef="let element">
          {{ element?.publishedAt | date }}
        </td>
      </ng-container>
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <button
            *ngIf="element?.id"
            type="button"
            [routerLink]="['/', element?.id]"
          >
            Details
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let element; columns: displayedColumns"
        class="group-element-row"
      ></tr>
    </table>

    <h4 *ngIf="channel?.videos?.length === 0" class="no-result">
      No videos here.
    </h4>

    <tfoot>
      <tr>
        <td>
          <button
            *ngIf="channel?.prevPageToken"
            type="button"
            (click)="loadPrevious(channel)"
          >
            Prev
          </button>
          <button
            *ngIf="channel?.nextPageToken"
            type="button"
            (click)="loadNext(channel)"
          >
            Next
          </button>
        </td>
      </tr>
    </tfoot>
  </div>
</ng-template>
